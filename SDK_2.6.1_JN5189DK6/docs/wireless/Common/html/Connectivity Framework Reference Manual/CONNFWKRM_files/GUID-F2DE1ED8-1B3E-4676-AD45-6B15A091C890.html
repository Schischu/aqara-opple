<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="topic"/>
<meta name="DC.Title" content="MEM_STATISTICS"/>
<meta name="DC.Relation" scheme="URI" content="GUID-C6F661E0-9700-45A0-8943-EE0624F43377.html"/>
<meta name="prodname" content=""/>
<meta name="version" content="1"/>
<meta name="release" content="0"/>
<meta name="modification" content="0"/>
<meta name="DC.Creator" content="NXP Semiconductors"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="GUID-F2DE1ED8-1B3E-4676-AD45-6B15A091C890"/>
<meta name="DC.Language" content="en-us"/>
<link rel="stylesheet" type="text/css" href="commonltr.css"/>
<title>MEM_STATISTICS</title>
</head>
<body id="GUID-F2DE1ED8-1B3E-4676-AD45-6B15A091C890">


    <h1 class="title topictitle1">MEM_STATISTICS</h1>

    <div class="body">
        <p class="p">The scope of this debug component is to allow efficient memory pools
            configuration. When enabled, the Memory Manager statistic component will record the
            following information for every memory pool:</p>

        <ul class="ul" id="GUID-F2DE1ED8-1B3E-4676-AD45-6B15A091C890__UL_KMM_FRS_1GB">
            <li class="li">Total number of buffers – does no change after MEM_Init()</li>

            <li class="li">Current and peak number of allocated buffers from a memory pool </li>

            <li class="li">Number of allocation/free failures for this pool </li>

        </ul>

        <p class="p">When combined with the memory tracking component, the statistics will also include buffer
            fragment waste information:</p>

        <ul class="ul" id="GUID-F2DE1ED8-1B3E-4676-AD45-6B15A091C890__UL_RNM_FRS_1GB">
            <li class="li">poolFragmentWaste – current memory waste for the entire pool. This value
                increases/decreases as the memory allocate/free operations are performed.</li>

            <li class="li">poolFragmentWastePeak – peak memory waste for the entire memory pool</li>

            <li class="li">poolFragmentMinWaste – minimum memory waste of a buffer from the pool</li>

            <li class="li">poolFragmentMaxWaste – maximum memory waste of a buffer from the pool</li>

        </ul>

        <p class="p"> </p>

        <p class="p">Adjusting memory pools configuration</p>

        <p class="p">It is a good advice to over-estimate the initial memory pool configuration, and then
            enable the memory manager debug macros fine tune the number of buffers and their size at
            run time.</p>

        <p class="p">For example, if after the initial memory configuration, the system halts in panic because
            it ran out of memory, then the number of buffer for the memory pool appropriate for the
            requested size should be increased. </p>

        <p class="p">After the application runs correctly, the memory statistics can be used to further adjust
            the memory pools. </p>

        <p class="p">The <em class="ph i">allocatedBlocksPeak</em> indicator can be analyzed for every pool and adjust the
            number of buffers so that: <em class="ph i">numBlocks</em> – <em class="ph i">allocatedBlocksPeak</em> &lt;= 1. It is
            usually a good practice to leave a buffer for unpredicted situations.</p>

        <p class="p">The pool fragment waste indicators can be used to decrease the size of the buffers from a
            pool. The scope is to reduce the overall memory waste. Usually, the minimum waste should
            reach 0. The new size <strong class="ph b">must</strong> be multiple of 4 bytes.</p>

    </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-C6F661E0-9700-45A0-8943-EE0624F43377.html">Memory Manager Debug support</a></div>
</div>
</div>

</body>
</html>